# Java-String API

## String.format()

> https://segmentfault.com/a/1190000019350486

### String.format()方法的两种重载

```java
// 使用当前本地区域对象（Locale.getDefault()），制定字符串格式和参数生成格式化的字符串
String String.format(String fmt, Object... args);

// 自定义本地区域对象，制定字符串格式和参数生成格式化的字符串
String String.format(Locale locale, String fmt, Object... args);
```

### 占位符

格式化说明最多会有5个部分(不包括%符号) . 下面的[]符号里面都是选择性的项目，因此只有%与type是必要的. 格式化说明的顺序是有规定的，必须要以这个顺序章指定

```
%[argument number][flags][width][.precision]type
```

* [argument number]：如果要格式化的参数超过一个以上，可以在这里指定是哪一个
* [flags]：指定类型的特定选项，例如数字要加逗号或正负号
* [width]：最小的字符数，注意，这不是总数，输出可以超过此宽度，若不足会主动补零
* [.precision]：精确度，注意前面有个圆点符号

实例：

```java
String format = String.format("%,6.1f", 42.000);
/*
* 执行结果：42.0
* 说明：
* 	1. 这个占位符实际上是 %f ，表示浮点数
* 	2. , 表示用逗号隔开（小数点左右，每三位数字为一组，方便阅读）
* 	3. 6 表示最小字符数为6
* 	4. .1 表示精确到小数点后1位（如果没有此参数，输出结果为：42.000000）
*/
```

### 超过一项以上的参数时

把新的参数加到后面，因此会有3个参数来调用format()而不是两个，并且在第一个参数中，也就是格式化串中，会有两个不同的格式化设定，也就是两个%开头的字符组合，第二个会应用在第一个%上面，第三个参数会用在第二%上，也就是参数会依照顺序应用在%上面" 。

```java
int one = 123456789;
double two = 123456.789;
String s = String.format("第一个参数：%,d 第二个参数：%,.2f", one, two);
System.out.println(s);
// 执行结果：第一个参数：123,456,789 第二个参数：123,456.79
```

### 转换符

| 转换符 | 说明                                          | 示例        |
| ------ | --------------------------------------------- | ----------- |
| %s     | 字符串类型                                    | "leeyaonan" |
| %c     | 字符类型                                      | 'm'         |
| %b     | 布尔类型                                      | true        |
| %d     | 整数类型（十进制）                            | 99          |
| %x     | 整数类型（十六进制）                          | FF          |
| %o     | 整数类型（八进制）                            | 77          |
| %f     | 浮点类型                                      | 99.99       |
| %a     | 十六进制浮点类型                              | FF.35AE     |
| %e     | 指数类型                                      | 9.38e+5     |
| %g     | 通用浮点类型（f和e类型中较短的）              |             |
| %h     | 散列码                                        |             |
| %%     | 百分比类型                                    |             |
| %n     | 换行符                                        |             |
| %tx    | 日期与时间类型（x代表不同的日期与时间转换符） |             |

### 转换符的标志

| 标志 | 说明                                                     | 示例                      | 结果             |
| ---- | -------------------------------------------------------- | ------------------------- | ---------------- |
| +    | 为正数或者负数添加符号                                   | ("%+d",15)                | +15              |
| -    | 左对齐（即字符长度小于指定长度时，靠左展示，右边补空格） | ("%-5d",15)               | \|15   \|        |
| 0    | 数字前面补0                                              | ("%04d",99)               | 0099             |
| 空格 | 在整数之前添加指定数量的空格                             | ("% 4d",99)               | \|  99\|         |
| ,    | 以","对数字分组                                          | ("%,f",9999.99)           | 9,999.990000     |
| (    | 使用括号包住负数（用括号代替负号）                       | ("%(f",-99.99)            | (99.990000)      |
| #    | 如果是浮点数则包含小数点，如果是16进制或8进制则添加0x或0 | ("%#x",99)<br/>("%#o",99) | 0x63<br/>0143    |
| <    | 格式化前一个转换符所描述的参数                           | ("%f和%<3.2f",99.45)      | 99.450000和99.45 |
| $    | 被格式化的参数索引                                       | ("%1$d,%2$s",99,"abc")    |                  |

### 对字符串进行格式化

**示例——将"hello"格式化为"hello "（左对齐）**

```java
String raw = "hello word";
String str = String.format("|%-15s|", raw);
System.out.println(str);
// 输出结果：|hello word     |
```

### 对整数进行格式化

**示例——将-1000显示为(1,000)**

```java
int num = -1000;
String str = String.format("%(,d", num);
System.out.println(str);
// 输出结果：(1,000)
```

### 对浮点数进行格式化

```java
double num = 123.456789;
System.out.print(String.format("浮点类型：%.2f %n", num));
System.out.print(String.format("十六进制浮点类型：%a %n", num));
System.out.print(String.format("通用浮点类型：%g ", num));
/*
输出结果：
	浮点类型：123.46 
	十六进制浮点类型：0x1.edd3c07ee0b0bp6 
	通用浮点类型：123.457 
*/
```

### 对日期时间进行格式化

#### 日期的转换符

| 转换符 | 说明                        | 示例                             |
| ------ | --------------------------- | -------------------------------- |
| c      | 包括全部日期和时间信息      | 星期六 十月 27 14:21:20 CST 2007 |
| F      | "年-月-日"格式              | 2007-10-27                       |
| D      | "月/日/年"格式              | 10/27/07                         |
| r      | "HH:MM:SS PM"格式（12时制） | 02:25:51 下午                    |
| T      | "HH:MM:SS"格式（24时制）    | 14:28:15                         |
| R      | "HH:MM"格式（24时制）       | 14:28                            |

#### 时间的转换符

| 转换符 | 说明                                   | 示例                |
| ------ | -------------------------------------- | ------------------- |
| H      | 2位数字24时制的小时（不足2位前面补0）  | 15                  |
| I      | 2位数字12时制的小时（不足2位前面补0）  | 03                  |
| k      | 2位数字24时制的小时（前面不补0）       | 15                  |
| I      | 2位数字12时制的小时（前面不补0）       | 3                   |
| M      | 2位数字的分钟（不足2位前面补0）        | 03                  |
| S      | 2位数字的毫秒（不足2位前面补0）        | 09                  |
| L      | 3位数字的毫秒（不足3位前面补0）        | 015                 |
| N      | 9位数字的（不足9位前面补0）            | 562000000           |
| P      | 小写字母的上午或下午标记               | 中：下午<br/>英：pm |
| z      | 相对于GMT的RFC822时区的偏移量          | +0800               |
| Z      | 时区缩写字符串                         | CST                 |
| s      | 1970-1-1 00:00:00 到现在所经过的秒数   | 1193468128          |
| Q      | 1970-1-1 00:00:00 到现在所经过的毫秒数 | 1193468128984       |

示例：

```java
 Date date = new Date();
 System.out.printf("全部日期和时间信息：%tc%n",date);
 System.out.printf("年-月-日格式：%tF%n",date);
 System.out.printf("月/日/年格式：%tD%n",date);
 System.out.printf("HH:MM:SS PM格式（12时制）：%tr%n",date);
 System.out.printf("HH:MM:SS格式（24时制）：%tT%n",date);
 System.out.printf("HH:MM格式（24时制）：%tR",date);
/*
    全部日期和时间信息：周四 5月 28 11:25:52 CST 2020
    年-月-日格式：2020-05-28
    月/日/年格式：05/28/20
    HH:MM:SS PM格式（12时制）：11:25:52 上午
    HH:MM:SS格式（24时制）：11:25:52
    HH:MM格式（24时制）：11:25
*/
```

