# MySQL建表规约

> 以下部分摘自《阿里巴巴Java开发手册1.4.0》，并做了注释与精简

## 【强制】

### is_xxx

表达是否概念的字段，必须使用is_xxx的命名方式，数据类型是unsigned tinyint（1是，0否）

说明：任何字段如果为非负数，必须是unsigned（即无符号化，从0开始）

注意：POJO类中的任何布尔类型的变量，都不要加is前缀，所以，需要在<resultMap>设置从is_xxx到xxx的命名方式是为了明确其取值含义与取值范围。

正例：表达逻辑删除的字段名is_deleted，1表示删除，0表示未删除。

### 命名采用小写字母或数字

表名、字段名必须使用小写字母或数字，禁止出现数字开头，禁止两个下划线中间只出现数字。数据库字段名的修改代价很大，因为无法进行预发布，所以字段名称需要慎重考虑。

说明：MySQL在Windows下不区分大小写，但是在Linux下默认是区分大小写，为了避免节外生枝，数据库名、表名、字段名都不允许出现任何大写字母。

### 表名不使用复数名词

说明：表名应该仅仅表示表里面的实体内容，不应该表示实体数量，对应于DO类名也是单数形式，符合表达习惯。

### 禁用保留字

如，desc，range，match，delayed等

### 索引名命名

* 主键索引：pk_字段名（pk：primary_key）
* 唯一索引：uk_字段名（uk：unique_key）
* 普通索引：idx_字段名（idx：index）

### 小数类型为decimal，禁止使用float和double

说明：float和double在存储的时候，存在精度损失的问题，很可能在值的比较时，得不到正确的结果。如果存储的数据范围超过decimal的范围，建议将数据拆成整数和小数分开存储。

decimal字段类型的说明：

decimal（a，b）

* a：表明小数点左右的最大十进制位数（最大38位）
* b：表明小数点右边的最大十进制位数（最大不超过a）

### 关于char定长字符串类型

如果存储的字符串长度几乎相等，使用char定长字符串类型

### 关于varchar可变长字符串

varchar不预先分配存储空间，长度不要超过5000，如果存储长度大于此值，定义字段类型为text，独立出一张表，用主键来对应，避免影响其他字段索引效率。

### 表必备三字段

* id：必为主键，类型为bigint unsigned，单表时自增，步长为1。
* gmt_create：datetime类型，主动创建时间
* gmt_modified：datetime类型，被动修改时间